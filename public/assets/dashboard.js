$(function(){function f(){e=$(window).height();g=h.length>0?h.offset().top:e}function i(){var a=$.windowScrollTop();if(g&&e)if(a+e>=g){a=k.find(".topic_message.hidden_until_scroll").not(".part_of_clump").slice(0,10);if(a.length<10&&l!==0&&!j)j=true;a.removeClass("hidden_until_scroll");f()}}var g=null,l=null,j=false,e=null,h=$("#after_topic_list"),k=$("#topic_list"),m=$("#show_all_messages_link");f();setInterval(f,2E3);$(".group_reference_checkbox").change(function(a,c){var b=$(this);c!==false&&m.click();
var d=b.attr("id").substring(6);$(".message_"+d).showIf(b.attr("checked"))}).each(function(){$(this).triggerHandler("change",false)});$(window).bind("scroll",i);setTimeout(i,0);(function(){var a={"New Assignments and Events":[],"Grading Notifications":[],"Group Membership Notifications":[],"Date Changes":[]};$(".dashboard_notification").each(function(){var d=$(this).find(".notification_name").get(0);if(notificationName=d&&d.innerHTML)switch(notificationName){case "New Event Created":case "Assignment Created":a["New Assignments and Events"].push(this);
break;case "Assignment Grading Reminder":case "Assignment Graded":case "Grade Weight Changed":case "Assignment Submitted Late":case "Group Assignment Submitted Late":a["Grading Notifications"].push(this);break;case "New Context Group Membership":case "New Context Group Membership Invitation":case "Group Membership Accepted":case "Group Membership Rejected":case "New Student Organized Group":a["Group Membership Notifications"].push(this);break;case "Assignment Due Date Changed":case "Event Date Changed":a["Date Changes"].push(this)}});
for(var c in a)if(a[c].length>3){var b=$(a[c][0]).clone();b.find(".content,.under_links").remove();b.find(".context_code").text("click to show these notifications in the stream");b.find(".subject").attr("href","#").text(a[c].length+" "+c);b.data("items",a[c]);b.click(function(d){d.preventDefault();d=$(this).data("items");$(d).removeClass("part_of_clump");$(this).remove()});$(a[c]).addClass("part_of_clump").eq(0).before(b)}})()});
