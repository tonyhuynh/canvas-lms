$(function(){function j(){f.val("1");g.show()}function k(){d.find("#migration_config > div").hide();f.val("0");g.hide();l.val("");e.attr("disabled",true);h.find(".migration_config").ifExists(function(){$plugin_mother=i.find($(this).data("mother_id"));$plugin_mother.append($(this));$plugin_mother.triggerHandler("pluginHidden",[a,b]);($alt_config=b.find(".migration_alt_config"))&&$plugin_mother.append($alt_config)})}var d=$("#config_options"),f=$("#export_file_enabled"),a=$("#migration_form"),e=a.find(".submit_button"),
g=a.find("#file_upload"),l=a.find("#export_file_input"),h=a.find("#migration_config"),i=$("#migration_configs"),b=$("#migration_alt_div");$("#choose_migration_system").change(function(){k();if($(this).val()=="none")d.hide();else{plugin_config_id="#plugin_"+$(this).val();$plugin_mother_div=i.find(plugin_config_id);$plugin_config=$plugin_mother_div.find(".migration_config");$plugin_config.data("mother_id",plugin_config_id);h.append($plugin_config);if($plugin_alt_config=$plugin_mother_div.find(".migration_alt_config")){$plugin_alt_config.data("mother_id",
plugin_config_id);b.append($plugin_alt_config)}d.show();$plugin_mother_div.triggerHandler("pluginShown",[j,a,b])}}).change();$("#import_subset").change(function(){$("#import_subset_options").showIf($(this).attr("checked"))}).change();$("#export_file_input").change(function(){if($(this).val().match(/\.zip$/i)){e.attr("disabled",false);$(".zip_error").hide()}else{e.attr("disabled",true);$(".zip_error").show()}});$("#migration_form").formSubmit({fileUpload:function(){return a.hasClass("file_upload")},
processData:function(c){$(this).hasClass("file_upload")||(c.export_file=null);return c},beforeSubmit:function(){$(this).find(".submit_button").attr("disabled",true).text("Uploading Course Export...")},success:function(){$(this).slideUp();$("#file_uploaded").slideDown()},error:function(c){$(this).formErrors(c)}})});
