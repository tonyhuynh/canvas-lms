$(document).ready(function(){$(".delete_quiz_link").click(function(a){a.preventDefault();$(this).parents(".quiz").confirmDelete({url:$(this).attr("href"),message:"Are you sure you want to delete this quiz?",error:function(b){$(this).formErrors(b)}})});$(".publish_multiple_quizzes_link").click(function(a){a.preventDefault();a=$("#publish_multiple_quizzes_dialog");var b=a.find(".quiz_item.blank:first").clone(true),g=a.find(".quiz_list").find(".quiz_item:not(.blank)").remove().end();$("#unpublished_quizzes .quiz").each(function(){var e=
b.clone(true),f=$(this).getTemplateData({textValues:["quiz_id","quiz_title"]});e.find(".id").val(f.quiz_id).attr("id","quiz_checkbox_"+f.quiz_id).end().find(".title").text(f.quiz_title||"Unnamed Quiz").attr("for","quiz_checkbox_"+f.quiz_id);g.append(e.show())});a.find("button").attr("disabled",false);a.dialog("close").dialog({autoOpen:false,width:400}).dialog("open")});$("#publish_quizzes_form").submit(function(){$(this).find("button").attr("disabled",true).filter(".submit_button").text("Publishing Quizzes...")});
$("#publish_multiple_quizzes_dialog .cancel_button").click(function(){$("#publish_multiple_quizzes_dialog").dialog("close")});if($("#quiz_locks_url").length>0){var d={},c=[];$("li.quiz").each(function(){c.push("quiz_"+$(this).attr("id").substring(13))});d.assets=c.join(",");$.ajaxJSON($("#quiz_locks_url").attr("href"),"GET",d,function(a){for(var b in a){var g=b;if(a[b]){var e=$("#quiz_lock_icon").clone().removeAttr("id");a[b].type="quiz";e.data("lock_reason",a[b]);$("#summary_"+g).find(".quiz_title").prepend(e)}}},
function(){})}});
$(document).ready(function(){$(".content_lock_icon").live("click",function(d){if($(this).data("lock_reason")){d.preventDefault();var c=$(this).data("lock_reason"),a=c.type||"content";d=$("<div/>");d.html("This "+a+" is locked.  No other reason has been provided.");if(c.lock_at)d.html("This "+a+" was locked "+$.parseFromISO(c.lock_at).datetime_formatted);else if(c.unlock_at)d.html("This "+a+" is locked until "+$.parseFromISO(c.unlock_at).datetime_formatted);else if(c.context_module){d.html("This "+a+
" is part of the module <b>"+c.context_module.name+"</b> and hasn't been unlocked yet.");if($("#context_modules_url").length>0){d.append("<br/>");c=$("<a/>");c.attr("href",$("#context_modules_url").attr("href"));c.text("Visit the modules page for information on how to unlock this content.");d.append(c)}}var b=$("#lock_reason_dialog");if(b.length===0){b=$("<div/>").attr("id","lock_reason_dialog");$("body").append(b.hide());b.append("<div class='lock_reason_content'></div><div class='button-container'><button type='button' class='button'>Ok, Thanks</button></div>");
b.find(".button-container .button").click(function(){b.dialog("close")})}b.find(".lock_reason_content").empty().append(d);b.dialog("close").dialog({autoOpen:false,title:"Content Is Locked"}).dialog("open")}})});
