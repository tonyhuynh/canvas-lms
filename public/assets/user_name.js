$(document).ready(function(){$("#name_and_email").delegate(".edit_user_link","click",function(b){b.preventDefault();$("#edit_student_dialog").dialog("close").dialog({autoOpen:false,title:"Edit Student Details",width:450}).dialog("open");$("#edit_student_form :text:visible:first").focus().select()});$("#edit_student_form").formSubmit({beforeSubmit:function(){$(this).find("button").attr("disabled",true).filter(".submit_button").text("Updating Student...")},success:function(b){$(this).find("button").attr("disabled",
false).filter(".submit_button").text("Update Student");$("#name_and_email .user_details").fillTemplateData({data:b&&b.user});$("#edit_student_dialog").dialog("close")},error:function(){$(this).find("button").attr("disabled",false).filter(".submit_button").text("Updating Student Failed, please try again")}});$("#edit_student_dialog .cancel_button").click(function(){$("#edit_student_dialog").dialog("close")});$(".remove_avatar_picture_link").click(function(b){b.preventDefault();var a=$(this);if(confirm("Are you sure you want to remove this user's profile picture?")){a.text("Removing image...");
$.ajaxJSON(a.attr("href"),"PUT",{"avatar[state]":"none"},function(){a.parents("tr").find(".avatar_image").remove();a.remove()},function(){a.text("Failed to remove the image, please try again")})}});$(".report_avatar_picture_link").click(function(b){b.preventDefault();b.preventDefault();var a=$(this);a.text("Reporting image...");$.ajaxJSON(a.attr("href"),"POST",{},function(){a.after("This image has been reported");a.remove()},function(){a.text("Failed to report the image, please try again")})})});
